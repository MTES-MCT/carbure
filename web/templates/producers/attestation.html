{% extends "producers/index.html" %}

{% block extra_css %}
<link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.10.20/css/jquery.dataTables.css">
{% endblock %}


{% block producer  %}
<div class="main" style="overflow-x: auto;">
	<div class="panel">
		<h3>Attestation de Durabilité 2019-12</h3>
		<a class="button" href="#modal_columns">Column filter</a>
		<div class="modal__backdrop" id="modal_columns">
			<div class="modal">
				<table>
					<tr>
						<td><input type="checkbox" name="checkbox" id="checkbox0" class="toggle-vis" data-column="0"></td>
						<td><label for="checkbox0" class="label-inline">Dépôt</label></td>
					</tr>
					<tr>
						<td><input type="checkbox" name="checkbox" id="checkbox1" class="toggle-vis" data-column="1"></td>
						<td><label for="checkbox1" class="label-inline">N°DAE ou DAA</label></td>
					</tr>
					<tr>
						<td><input type="checkbox" name="checkbox" id="checkbox2" class="toggle-vis" data-column="2"></td>
						<td><label for="checkbox2" class="label-inline">Date d'entrée</label></td>
					</tr>
					<tr>
						<td><input type="checkbox" name="checkbox" id="checkbox3" class="toggle-vis" data-column="3"></td>
						<td><label for="checkbox3" class="label-inline">Volume</label></td>
					</tr>
					<tr>
						<td><input type="checkbox" name="checkbox" id="checkbox4" class="toggle-vis" data-column="4"></td>
						<td><label for="checkbox4" class="label-inline">Types</label></td>
					</tr>
					<tr>
						<td><input type="checkbox" name="checkbox" id="checkbox5" class="toggle-vis" data-column="5"></td>
						<td><label for="checkbox5" class="label-inline">Filière de production</label></td>
					</tr>
					<tr>
						<td><input type="checkbox" name="checkbox" id="checkbox6" class="toggle-vis" data-column="6"></td>
						<td><label for="checkbox6" class="label-inline">Catégorie</label></td>
					</tr>
					<tr>
						<td><input type="checkbox" name="checkbox" id="checkbox7" class="toggle-vis" data-column="7"></td>
						<td><label for="checkbox7" class="label-inline">Système fournisseur</label></td>
					</tr>
					<tr>
						<td><input type="checkbox" name="checkbox" id="checkbox8" class="toggle-vis" data-column="8"></td>
						<td><label for="checkbox8" class="label-inline">Pays d'origine</label></td>
					</tr>
					<tr>
						<td><input type="checkbox" name="checkbox" id="checkbox9" class="toggle-vis" data-column="9"></td>
						<td><label for="checkbox9" class="label-inline">Respect des critères de durabilité</label></td>
					</tr>
					<tr>
						<td><input type="checkbox" name="checkbox" id="checkbox10" class="toggle-vis" data-column="10"></td>
						<td><label for="checkbox10" class="label-inline">GES transport et distribution</label></td>
					</tr>
					<tr>
						<td><input type="checkbox" name="checkbox" id="checkbox11" class="toggle-vis" data-column="11"></td>
						<td><label for="checkbox11" class="label-inline">Total émissions GES</label></td>
					</tr>
					<tr>
						<td><input type="checkbox" name="checkbox" id="checkbox12" class="toggle-vis" data-column="12"></td>
						<td><label for="checkbox12" class="label-inline">GES carburant fossile</label></td>
					</tr>
					<tr>
						<td><input type="checkbox" name="checkbox" id="checkbox13" class="toggle-vis" data-column="13"></td>
						<td><label for="checkbox13" class="label-inline">% de réduction totale</label></td>
					</tr>
					<tr>
						<td><input type="checkbox" name="checkbox" id="checkbox14" class="toggle-vis" data-column="14"></td>
						<td><label for="checkbox14" class="label-inline">Numéro d'enregistrement double-comptage</label></td>
					</tr>
					<tr>
						<td><input type="checkbox" name="checkbox" id="checkbox15" class="toggle-vis" data-column="15"></td>
						<td><label for="checkbox15" class="label-inline">Pays d'implantation</label></td>
					</tr>
					<tr>
						<td><input type="checkbox" name="checkbox" id="checkbox16" class="toggle-vis" data-column="16"></td>
						<td><label for="checkbox16" class="label-inline">Date de mise en service</label></td>
					</tr>
				</table>

				<div class="form__group button__group">
					<a class="button secondary" href="#modal-section">Ok</a>
				</div>
			</div>
		</div>
		<table class="display nowrap" id="datatable">
			<thead>
				<tr>
					<th>Dépôt</th>
					<th>N°DAE ou DAA</th>
					<th>Date d'entrée</th>
					<th>Volume</th>
					<th>Types</th>
					<th>Filière de production</th>
					<th>Catégorie</th>
					<th>Système fournisseur</th>
					<th>Pays d'origine</th>
					<th>Respect des critères de durabilité</th>
					<th>GES transport et distribution</th>
					<th>Total émissions de GES</th>
					<th>GES du carburant fossile</th>
					<th>% de réduction totale</th>
					<th>Numéro d'enregistrement double-comptage</th>
					<th>Pays d'implantation</th>
					<th>Date de mise en service</th>
					<th>Date de mise en service</th>
					<th>Date de mise en service</th>
				</tr>
			</thead>
			<tbody>
				<tr>
					<td>GRANDPUITS</td>
					<td>19FRG0432000482724020</td>
					<td>1/10/2019</td>
					<td>28,687</td>
					<td>EMHV</td>
					<td>Colza</td>
					<td>CONV</td>
					<td>SV-2BS010010</td>
					<td>FR</td>
					<td>Oui</td>
					<td>1.00</td>
					<td>34.12</td>
					<td>83.80</td>
					<td>59.28%</td>
					<td>N/A</td>
					<td>FR</td>
					<td>1/7/2007</td>
					<td>1/7/2007</td>
					<td>1/7/2007</td>
				</tr>
				<tr>
					<td>GRANDPUITS</td>
					<td>19FRG0432000482724020</td>
					<td>1/10/2019</td>
					<td>28,687</td>
					<td>EMHV</td>
					<td>Colza</td>
					<td>CONV</td>
					<td>SV-2BS010010</td>
					<td>FR</td>
					<td>Oui</td>
					<td>1.00</td>
					<td>34.12</td>
					<td>83.80</td>
					<td>59.28%</td>
					<td>N/A</td>
					<td>FR</td>
					<td>1/7/2007</td>
					<td>1/7/2007</td>
					<td>1/7/2007</td>
				</tr>
				<tr>
					<td>GRANDPUITS</td>
					<td>19FRG0432000482724020</td>
					<td>1/10/2019</td>
					<td>28,687</td>
					<td>EMHV</td>
					<td>Colza</td>
					<td>CONV</td>
					<td>SV-2BS010010</td>
					<td>FR</td>
					<td>Oui</td>
					<td>1.00</td>
					<td>34.12</td>
					<td>83.80</td>
					<td>59.28%</td>
					<td>N/A</td>
					<td>FR</td>
					<td>1/7/2007</td>
					<td>1/7/2007</td>
					<td>1/7/2007</td>
				</tr>
			</tbody>
		</table>
	</div>
</div>

<div class="modal__backdrop" id="modal_lot">
	<div class="modal">
		<section class="section section-white" id="form">
	      <div class="container">
	        <form action="#" method="post" name="form" target="_blank" novalidate>
	          <h1>Form</h1>
	          <div class="form__group">
	            <label for="email">Pour être informé des nouveautés, inscrivez-vous à notre newsletter :</label>
	            <input type="email" value="" name="email" id="email">
	          </div>

	          <div class="form__group">
	            <label class="required" for="textarea">Renseignez votre meilleure recette de lasagnes :</label>
	            <textarea name="textarea" id="textarea"></textarea>
	          </div>

	          <div class="form__group">
	            <label for="search">Tapez un mot-clef :</label>
	            <div class="search__group">
	              <input type="text" class="" value="" name="search" id="search">
	              <button class="overlay-button" aria-label="Recherche">
	                <svg class="icon icon-search"><use xlink:href="#magnifier"></use></svg>
	              </button>
	            </div>
	          </div>

	          <div class="form__group">
	            <fieldset>
	              <legend>Radio</legend>
	              <input type="radio" name="radio" id="radio-pup" value="1" /><label for="radio-pup" class="label-inline">Chiots</label>
	              <input type="radio" name="radio" id="radio-kitten" value="0" /><label for="radio-kitten" class="label-inline">Chatons</label>
	            </fieldset>
	          </div>

	          <div class="form__group">
	            <fieldset>
	              <legend>Checkbox</legend>
	              <input type="checkbox" name="checkbox" id="checkbox-fraises" value="fraise"><label for="checkbox-fraises" class="label-inline">Fraises</label>
	              <input type="checkbox" name="checkbox" id="checkbox-bananes" value="bananes"><label for="checkbox-bananes" class="label-inline">Bananes</label>
	              <input type="checkbox" name="checkbox" id="checkbox-ananas" value="fraise"><label for="checkbox-ananas" class="label-inline">Ananas</label>
	            </fieldset>
	          </div>

	          <div class="form__group">
	            <fieldset>
	              <legend>Switch</legend>
	              <label for="show-chat" class="label-inline">Afficher les chats mignons</label>
	              <input type="checkbox" class="switch" name="show-chat" id="show-chat" value="show-chat">
	              <label for="disabled-switch" class="label-inline">Switch désactivé</label>
	              <input type="checkbox" class="switch" name="disabled-switch" id="disabled-switch" value="disabled-switch" disabled>
	            </fieldset>
	          </div>

	          <div class="form__group">
	            <label for="select">Select</label>
	            <select id="select">
	              <option>Choisissez...</option>
	              <option>Frites</option>
	              <option>Salade</option>
	            </select>
	          </div>

	          <button class="button" type="submit" name="subscribe" id="submit">Valider</button>
	        </form>
	      </div>
	    </section>
		<div class="form__group button__group">
			<a class="button secondary" href="#modal-section">Ok</a>
		</div>
	</div>
</div>

{% endblock %}


{% block extra_js %}
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
<script type="text/javascript" charset="utf8" src="https://cdn.datatables.net/1.10.20/js/jquery.dataTables.js"></script>
<script type="text/javascript">
	$(document).ready(function() {
		var table = $('#datatable').DataTable({"scrollX": true});

		function loadTableSettings() {
			var tableSettings = localStorage.getItem('tableSettings');
			if (tableSettings === undefined || tableSettings === null) {
				columns = [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]
				saveTableSettings(columns)
			} else {
				columns = JSON.parse(tableSettings)
			}
			return columns
		}


		function saveTableSettings(settings) {
			localStorage.setItem("tableSettings", JSON.stringify(settings));
		}

		function hideTableColumns(columns) {
			/* display table columns depending on config */
			for (let i = 0, len = columns.length; i < len; i++) {
				let isChecked = columns[i]
				let boxid = '#checkbox' + i
				if (isChecked) {
					$(boxid).prop("checked", true);
					var column = table.column(i);
					column.visible(!column.visible());
				}
			}
		}

		var columnsSettings = loadTableSettings()
		hideTableColumns(columnsSettings)

		/* column filter modal event management */
		$('.toggle-vis').on('click', function(e) {
	        // Get the column API object
	        let colid = $(this).attr('data-column')
	        let column = table.column(colid);

	        // Toggle the visibility
	        column.visible(!column.visible());
	        columnsSettings[colid] = columnsSettings[colid] == 1 ? 0 : 1
	        saveTableSettings(columnsSettings)
    	});

	});
</script>

{% endblock %}